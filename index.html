<script>
let chart; // Vari√°vel global para o gr√°fico

async function analisar(){
    let team = document.getElementById("team").value;

    // Mensagem de loading
    document.getElementById("last5Games").innerHTML = "A analisar √∫ltimos 5 jogos...";
    document.getElementById("nextGame").innerHTML = "A analisar pr√≥ximo jogo...";

    // üî• URL corrigida (agora com /api/analyze)
    let res = await fetch("https://football-analyzer-git-main-moises-paulinos-projects.vercel.app/api/analyze?team=" + team);
    let data = await res.json();

    console.log(data); // para vermos resposta no futuro

    // Mostrar probabilidades b√°sicas primeiro
    document.getElementById("nextGame").innerHTML = `
        <h3>Previs√£o do Jogo</h3>

        Over 2.5 Golos
        <div class="progress-container">
            <div class="progress-bar" style="width:${data.over25}%; background:#22c55e;">
                ${data.over25}%
            </div>
        </div>

        Ambas Marcam (BTTS)
        <div class="progress-container">
            <div class="progress-bar" style="width:${data.btts}%; background:#3b82f6;">
                ${data.btts}%
            </div>
        </div>

        Cart√µes
        <div class="progress-container">
            <div class="progress-bar" style="width:${data.cards}%; background:#f59e0b;">
                ${data.cards}%
            </div>
        </div>

        Cantos
        <div class="progress-container">
            <div class="progress-bar" style="width:${data.corners}%; background:#ef4444;">
                ${data.corners}%
            </div>
        </div>
    `;
}
</script>
